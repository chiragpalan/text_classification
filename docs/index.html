<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nifty 50 Chart</title>
  <script>
    async function refreshData() {
      const response = await fetch('https://api.github.com/repos/chiragpalan/text_classification/actions/workflows/update_chart.yml/dispatches', {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_GITHUB_TOKEN',
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ ref: 'main' }),
      });

      if (response.ok) {
        alert('Refresh triggered! The chart will be updated shortly.');
        location.reload(); // Reloads the page to reflect new data
      } else {
        alert('Failed to trigger refresh. Please try again.');
      }
    }
  </script>
</head>
<body>
  <h1>Nifty 50 Candlestick Chart</h1>
  <button onclick="refreshData()">Refresh</button>
  <iframe src="chart.html" width="100%" height="600"></iframe>
</body>
</html>
